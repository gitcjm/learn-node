function genJSCode(e,i){return"var "+e+" = "+i+";\n"}var getlib=require("cjmlib"),getOtherLib=require("./myOtherLib.js");console.log(getlib);for(var obj in getlib)console.log(getlib[obj]);var file=require("fs");file.writeFile("build.js","");for(var i=0;i<global.process.mainModule.children.length;i++){var imObject=global.process.mainModule.children[i].exports;for(var attr in imObject)file.appendFile("build.js",genJSCode(attr,imObject[attr]))}file.appendFile("build.js","//向build.js中写入两句测试代码\n"),file.appendFile("build.js","showName();\n"),file.appendFile("build.js","console.log(age);\n"),file.appendFile("build.js","showPhone();\n"),file.readFile("./a.css",function(e,i){if(e)throw e;file.appendFile("build.js","//向build.js中写入样式文件\n");var l=/['|"](.*\.jpg)['|"]/g,r=l.exec(i.toString()),n=r[1];file.readFile(n,function(e,l){if(e)throw e;i=i.toString().replace(n,"data:image/jpg;base64,"+l.toString("base64")).trim(),file.appendFile("build.js",'document.write("<style>'+i+'</style>");')})});